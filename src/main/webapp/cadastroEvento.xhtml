<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<f:metadata>
		<f:viewAction action="#{loginBean.isLoggedForward()}" />
	</f:metadata>
</h:head>
<ui:composition template="main.xhtml">
	<ui:define name="title">Cadastro de Eventos</ui:define>
	<ui:define name="body">

		<h:form id="addevento">
			<div class="row">
				<div class="col-md-12">
					<h2 class="form-signin-heading text-center"></h2>
					<ui:include src="messages.xhtml" />
					<div class="col-md-12" style="margin-top: 2%;">
						<h:outputLabel id="nome" value="Nome" />
						<h:inputText class="form-control" required="true"
							a:placeholder="nome do evento" maxlength="100"
							requiredMessage="Digite o nome do evento."
							value="#{cadastrarEvento.evento.nome}" />
					</div>

					<div class="col-md-6" style="margin-top: 2%;">
						<h:outputLabel id="dataIni" value="Data e hora de início" />
						<br></br>
						<p:calendar value="#{cadastrarEvento.evento.dataInicio}"
							requiredMessage="Digite a data inicial do evento." maxlength="16"
							pattern="dd/MM/yyyy HH:mm" required="true" />
					</div>

					<div class="col-md-6" style="margin-top: 2%;">
						<h:outputLabel id="dataFim" value="Data e hora de término" />
						<br></br>
						<p:calendar value="#{cadastrarEvento.evento.dataFim}"
							pattern="dd/MM/yyyy HH:mm" maxlength="16"
							requiredMessage="Digite a data final do evento." required="true" />
					</div>

					<div class="col-md-12" style="margin-top: 2%;">
						<h:outputLabel id="informacoes" value="Informações" />
						<h:inputTextarea cols="50" rows="10" styleClass="form-control"
							value="#{cadastrarEvento.evento.informacoes}" a:maxlength="1000"
							requiredMessage="Digite as informações do evento."
							a:placeholder="Informe as informações do evento" required="true" />
					</div>
					<div class="col-md-12" style="margin-top: 2%;">
						<h:outputLabel id="telefone" value="Telefone" />
						<p:inputMask class="form-control" mask="(99) 9999-9999?9"
							a:placeholder="telefone do evento"
							requiredMessage="Digite o telefone do evento."
							value="#{cadastrarEvento.evento.telefone}" />
					</div>
					<div class="col-md-12" style="margin-top: 2%;">
						<h:outputLabel id="empresa" value="Empresa Organizadora" />
						<h:inputText class="form-control" maxlength="100"
							a:placeholder="nome da empresa organizadora"
							value="#{cadastrarEvento.evento.nomeEmpresaOrganizadora}" />
					</div>
					<div class="col-md-12" style="margin-top: 2%;">
						<h:outputLabel id="email" value="E-mail" />
						<h:inputText class="form-control" a:placeholder="e-mail do evento"
							maxlength="100" value="#{cadastrarEvento.evento.email}"
							validatorMessage="E-mail não válido!">
							<f:validateRegex
								pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
						</h:inputText>
					</div>

					<div class="col-md-12" style="margin-top: 2%;">
						<h:outputLabel id="localLab" value="Local" />
						<br></br>
						<p:autoComplete id="local" value="#{cadastrarEvento.evento.local}"
							dropdown="true" itemLabel="#{loc.nome}" itemValue="#{loc}"
							var="loc" maxlength="150"
							completeMethod="#{cadastrarEvento.completeText}"
							converter="localConverter" forceSelection="true"
							minQueryLength="3" maxResults="10" required="true"
							requiredMessage="Selecione um local!">
							<p:ajax event="itemSelect"
								listener="#{cadastrarEvento.onItemSelect}" />
						</p:autoComplete>
						<p:tooltip id="toolTipFade" for="local"
							value="Digite partes do nome do local" />

					</div>

					<div class="col-md-12" style="margin-top: 2%;">
						<p:outputPanel id="panelFoto">
							<h:outputLabel id="foto" value="Foto" />
							<br></br>
							<p:fileUpload label="Selecionar" cancelLabel="Cancelar"
								auto="true"
								fileUploadListener="#{cadastrarEvento.handleFileUpload}"
								mode="advanced" update="panelFoto" sizeLimit="5000000"
								fileLimit="5"
								fileLimitMessage="O número máximo de arquivos é 5!"
								allowTypes="/(\.|\/)(gif|jpe?g|png)$/" style="margin-bottom:3%;" />

							<ui:repeat var="ima" value="#{cadastrarEvento.evento.imagens}"
								varStatus="stat">
								<p:commandLink immediate="true" id="link"
									update="addevento:panelFoto"
									action="#{cadastrarEvento.removerImagem(ima)}">
									<i class="glyphicon glyphicon-remove" style="color: red;" />
								</p:commandLink>
								<p:spacer width="2%" />
								<h:outputLabel value="#{ima.nomeArquivo}" />
								<br></br>
							</ui:repeat>

						</p:outputPanel>
					</div>
					<div class="col-md-12" style="margin-top: 2%;">

						<!-- 						<h:outputLabel id="video" value="Vídeo YouTube (URL)" /> -->
						<div class="input-group">
							<span class="input-group-addon" id="sizing-addon2"><i
								class="fa fa-youtube" /></span>
							<h:inputText class="form-control" id="videoURL"
								value="#{cadastrarEvento.evento.videoURL}" maxlength="1000"
								a:placeholder="URL YouTube" aria-describedby="sizing-addon2">
								<p:ajax event="blur" update="videoYou,videoURL" process="@this"
									partialSubmit="true"
									listener="#{cadastrarEvento.filtrarURLYoutube}" />
							</h:inputText>
						</div>
						<p:outputPanel id="videoYou">
							<p:media value="#{cadastrarEvento.evento.videoURL}" width="700"
								height="400" player="flash"
								style="margin-top:2%; margin-left: 10%;"
								rendered="#{cadastrarEvento.evento.videoURL != null and cadastrarEvento.evento.videoURL != ''}" />
						</p:outputPanel>
					</div>
					<div class="col-md-12" style="margin-top: 2%;">
						<!-- 						<h:outputLabel value="Link Facebook" /> -->
						<div class="input-group">
							<span class="input-group-addon" id="sizing-addon2"><i
								class="fa fa-facebook-square" /></span>
							<h:inputText class="form-control"
								value="#{cadastrarEvento.evento.URL_facebook}" maxlength="1000"
								a:placeholder="Link Facebook" aria-describedby="sizing-addon2" />
						</div>
					</div>
					<div class="col-md-12" style="margin-top: 2%;">
						<!-- 						<h:outputLabel value="Link Twitter" /> -->
						<div class="input-group">
							<span class="input-group-addon" id="sizing-addon2"><i
								class="fa fa-twitter" /></span>
							<h:inputText class="form-control"
								value="#{cadastrarEvento.evento.URL_twitter}" maxlength="1000"
								a:placeholder="Link Twitter" aria-describedby="sizing-addon2" />
						</div>
					</div>
					<div class="col-md-12" style="margin-top: 2%;">
						<!-- 						<h:outputLabel value="Link Site" /> -->
						<div class="input-group">
							<span class="input-group-addon" id="sizing-addon2"><i
								class="fa fa-globe" /></span>
							<h:inputText class="form-control" maxlength="1000"
								value="#{cadastrarEvento.evento.URL_site}"
								a:placeholder="Link Site" aria-describedby="sizing-addon2" />
						</div>
					</div>

					<div class="col-md-12" style="margin-top: 2%; padding-bottom: 5%;">
						<h:commandLink value="Salvar" class="btn btn-lg btn-success"
							action="#{cadastrarEvento.adicionarEvento}">
							<i class="fa fa-fw fa-save" />
						</h:commandLink>
						<h:outputText value=" " />
						<h:commandLink value="Voltar" class="btn btn-lg btn-primary"
							action="consultaEvento.xhtml" immediate="true">
							<i class="fa fa-fw fa-remove" />
						</h:commandLink>
					</div>
				</div>
				<div class="col-lg-4" />
			</div>
		</h:form>
	</ui:define>
</ui:composition>
</html>
